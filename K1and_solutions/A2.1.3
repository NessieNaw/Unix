TMP=$RANDOM_$$
mkdir "${TMP}"
tar -x "$1" -C "${TMP}"
(cd "$1}; find -type d ) | tar -cf "$2" --no-recursion -T -

